### CONCURRENT OWNERSHIP: @3chdog @tcfwbper @lukehu-nctu

# BCFLwithMEC
Term Project of Blockchain class

# How to use
## 1. deploy your contract
```
python3 contractAPI/deployContract.py --sol /home/jack/BCFLwithMEC/contracts/FL.sol
```
It will show the contract address on stdout and store all info in the folder "BCFLwithMEC/contracts".
"Tx_hash" is the transaction hash of which our ethereum deploys the contract.

Or you can define your eth_config and miner
```
python3 contractAPI/deployContract.py \
--sol /home/jack/BCFLwithMEC/contracts/FL.sol \
--config /home/jack/BCFLwithMEC/eth_config.json \
--miner miner3
```
## 2. get the contract deployed
```
# input .json that generated by deployContract.py
# not contract.sol
python3 contractAPI/getContract.py --contrjson /home/jack/BCFLwithMEC/contracts/FL.json
```
It will return an object of web3.eth.contract

Or you can define your eth_config, miner, contrjson, and contrtxjson
```
python3 contractAPI/getContract.py \
--config /home/jack/BCFLwithMEC/eth_config.json \
--miner miner3 \
--contrjson /home/jack/BCFLwithMEC/contracts/FL.json \
--contrjson /home/jack/BCFLwithMEC/contracts/FL_deployed_tx_receipt.json \
```

## 3. interact with FL contract in python
We only define a class of FL contract to call the functions in the contract.
The arguments of FLContract.py are the same of getContract.py
```
python3 contractAPI/FLContract.py --contrjson /home/jack/BCFLwithMEC/contracts/FL.json
```

Or you can import FLcontract.py to get FL Contract object.
```
# in your python file
from contractAPI import getContract
from contractAPI import FLContract

contract = getContract.get_contract(eth_config, contrJson)
myFLcontract = FLContract.FL_Contract(contract, w3.eth.accounts[0])
myFLcontract.stop_training()
```

## 4. other tools
get private key through keystore file
```
python3 contractAPI/getPrivateKey.py --keystore /home/jack/miner1/data/keystore/UTC--2022-04-16T09-49-46 --passwd abcabc
```
send transaction
send only the transaction, not through contract
```
# this is for test
python3 contractAPI/sendTransaction.py
```

# Details
## 1. Blockchain: Go Ethereum

### (1) Eth Nodes
Now two nodes in the "eth_config"

### (2) Contracts
Implement flower server

### (3) IPFS
Now doing...

## 2. Federated Learning: flower 0.18.0
https://github.com/adap/flower  
edit flower client to fit Blockchain  

## 3. MEC